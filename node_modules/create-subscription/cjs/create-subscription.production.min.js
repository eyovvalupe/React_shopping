/** @license React v16.6.0
 * create-subscription.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';Object.defineProperty(exports,"__esModule",{value:!0});var m=require("react");function n(a,b,e,f,c,g,d,h){if(!a){a=void 0;if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[e,f,c,g,d,h],l=0;a=Error(b.replace(/%s/g,function(){return k[l++]}));a.name="Invariant Violation"}a.framesToPop=1;throw a;}}
function p(a){for(var b=arguments.length-1,e="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=0;f<b;f++)e+="&args[]="+encodeURIComponent(arguments[f+1]);n(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e)}function q(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}
function r(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}
exports.createSubscription=function(a){var b=a.getCurrentValue,e=a.subscribe;return function(a){function c(){var g,d,h;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");for(var k=arguments.length,l=Array(k),e=0;e<k;e++)l[e]=arguments[e];return h=(g=(d=q(this,a.call.apply(a,[this].concat(l))),d),d.state={source:d.props.source,value:null!=d.props.source?b(d.props.source):void 0},d._hasUnmounted=!1,d._unsubscribe=null,g),q(d,h)}r(c,a);c.getDerivedStateFromProps=function(a,
d){return a.source!==d.source?{source:a.source,value:null!=a.source?b(a.source):void 0}:null};c.prototype.componentDidMount=function(){this.subscribe()};c.prototype.componentDidUpdate=function(a,b){this.state.source!==b.source&&(this.unsubscribe(),this.subscribe())};c.prototype.componentWillUnmount=function(){this.unsubscribe();this._hasUnmounted=!0};c.prototype.render=function(){return this.props.children(this.state.value)};c.prototype.subscribe=function(){var a=this,d=this.state.source;if(null!=
d){var c=e(d,function(b){a._hasUnmounted||a.setState(function(a){return b===a.value||d!==a.source?null:{value:b}})});"function"!==typeof c?p("266"):void 0;this._unsubscribe=c;c=b(this.props.source);c!==this.state.value&&this.setState({value:c})}};c.prototype.unsubscribe=function(){"function"===typeof this._unsubscribe&&this._unsubscribe();this._unsubscribe=null};return c}(m.Component)};
