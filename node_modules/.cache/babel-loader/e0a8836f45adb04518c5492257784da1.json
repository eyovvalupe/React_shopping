{"ast":null,"code":"import _classCallCheck from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jared/workspace/github/jaredpalmer/react-suspense/src/components/SearchPage.js\";\nimport React from 'react';\nimport { unstable_scheduleCallback } from 'scheduler';\nimport { Spinner } from './Spinner';\nimport ListItem from './ListItem';\nimport { searchArtistsJSON } from '../api';\n\nvar Search =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Search, _React$Component);\n\n  function Search() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Search)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      value: '',\n      asyncValue: '',\n      isLoading: false,\n      currentId: null\n    };\n\n    _this.search = function (query) {\n      if (query.trim !== '') {\n        _this.setState({\n          isLoading: true\n        });\n\n        searchArtistsJSON(query).then(function (results) {\n          return _this.setState({\n            results: results,\n            isLoading: false\n          });\n        }, function (error) {\n          return console.log(error);\n        });\n      }\n    };\n\n    _this.handleChange = function (event) {\n      event.persist();\n\n      _this.setState({\n        value: event.target.value\n      }); // Search with the new hip, low-priority version of state\n\n\n      unstable_scheduleCallback(function () {\n        _this.setState({\n          asyncValue: event.target.value\n        }, function () {\n          return _this.search(_this.state.asyncValue);\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          isLoading = _this$state.isLoading,\n          currentId = _this$state.currentId,\n          results = _this$state.results,\n          value = _this$state.value;\n      return React.createElement(\"div\", {\n        className: \"search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input\",\n        value: value,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }), isLoading ? React.createElement(Spinner, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }) : results && results.length > 0 ? results.map(function (item) {\n        return React.createElement(ListItem, {\n          to: \"/artist/\".concat(item.id),\n          onClick: function onClick(currentId) {\n            return _this2.setState({\n              currentId: currentId\n            });\n          },\n          key: item.id,\n          item: item,\n          currentId: currentId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        });\n      }) : React.createElement(\"div\", {\n        className: \"empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"No Results Found. Search for artists.\"));\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/jared/workspace/github/jaredpalmer/react-suspense/src/components/SearchPage.js"],"names":["React","unstable_scheduleCallback","Spinner","ListItem","searchArtistsJSON","Search","state","value","asyncValue","isLoading","currentId","search","query","trim","setState","then","results","error","console","log","handleChange","event","persist","target","length","map","item","id","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,yBAAT,QAA0C,WAA1C;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,iBAAT,QAAkC,QAAlC;;IAEMC,M;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,UAAU,EAAE,EAFN;AAGNC,MAAAA,SAAS,EAAE,KAHL;AAINC,MAAAA,SAAS,EAAE;AAJL,K;;UAORC,M,GAAS,UAAAC,KAAK,EAAI;AAChB,UAAIA,KAAK,CAACC,IAAN,KAAe,EAAnB,EAAuB;AACrB,cAAKC,QAAL,CAAc;AAAEL,UAAAA,SAAS,EAAE;AAAb,SAAd;;AACAL,QAAAA,iBAAiB,CAACQ,KAAD,CAAjB,CAAyBG,IAAzB,CACE,UAAAC,OAAO;AAAA,iBAAI,MAAKF,QAAL,CAAc;AAAEE,YAAAA,OAAO,EAAPA,OAAF;AAAWP,YAAAA,SAAS,EAAE;AAAtB,WAAd,CAAJ;AAAA,SADT,EAEE,UAAAQ,KAAK;AAAA,iBAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ;AAAA,SAFP;AAID;AACF,K;;UAEDG,Y,GAAe,UAAAC,KAAK,EAAI;AACtBA,MAAAA,KAAK,CAACC,OAAN;;AACA,YAAKR,QAAL,CAAc;AAAEP,QAAAA,KAAK,EAAEc,KAAK,CAACE,MAAN,CAAahB;AAAtB,OAAd,EAFsB,CAGtB;;;AACAN,MAAAA,yBAAyB,CAAC,YAAM;AAC9B,cAAKa,QAAL,CAAc;AAAEN,UAAAA,UAAU,EAAEa,KAAK,CAACE,MAAN,CAAahB;AAA3B,SAAd,EAAkD;AAAA,iBAChD,MAAKI,MAAL,CAAY,MAAKL,KAAL,CAAWE,UAAvB,CADgD;AAAA,SAAlD;AAGD,OAJwB,CAAzB;AAKD,K;;;;;;;6BAEQ;AAAA;;AAAA,wBAC0C,KAAKF,KAD/C;AAAA,UACCG,SADD,eACCA,SADD;AAAA,UACYC,SADZ,eACYA,SADZ;AAAA,UACuBM,OADvB,eACuBA,OADvB;AAAA,UACgCT,KADhC,eACgCA,KADhC;AAGP,aACE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,SAAS,EAAC,OAAjB;AAAyB,QAAA,KAAK,EAAEA,KAAhC;AAAuC,QAAA,QAAQ,EAAE,KAAKa,YAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAGGX,SAAS,GACR,oBAAC,OAAD;AAAS,QAAA,IAAI,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADQ,GAENO,OAAO,IAAIA,OAAO,CAACQ,MAAR,GAAiB,CAA5B,GACFR,OAAO,CAACS,GAAR,CAAY,UAAAC,IAAI;AAAA,eACd,oBAAC,QAAD;AACE,UAAA,EAAE,oBAAaA,IAAI,CAACC,EAAlB,CADJ;AAEE,UAAA,OAAO,EAAE,iBAAAjB,SAAS;AAAA,mBAAI,MAAI,CAACI,QAAL,CAAc;AAAEJ,cAAAA,SAAS,EAATA;AAAF,aAAd,CAAJ;AAAA,WAFpB;AAGE,UAAA,GAAG,EAAEgB,IAAI,CAACC,EAHZ;AAIE,UAAA,IAAI,EAAED,IAJR;AAKE,UAAA,SAAS,EAAEhB,SALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADc;AAAA,OAAhB,CADE,GAWF;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAhBJ,CADF;AAqBD;;;;EArDkBV,KAAK,CAAC4B,S;;AAwD3B,eAAevB,MAAf","sourcesContent":["import React from 'react';\n\nimport { unstable_scheduleCallback } from 'scheduler';\nimport { Spinner } from './Spinner';\nimport ListItem from './ListItem';\nimport { searchArtistsJSON } from '../api';\n\nclass Search extends React.Component {\n  state = {\n    value: '',\n    asyncValue: '',\n    isLoading: false,\n    currentId: null,\n  };\n\n  search = query => {\n    if (query.trim !== '') {\n      this.setState({ isLoading: true });\n      searchArtistsJSON(query).then(\n        results => this.setState({ results, isLoading: false }),\n        error => console.log(error)\n      );\n    }\n  };\n\n  handleChange = event => {\n    event.persist();\n    this.setState({ value: event.target.value });\n    // Search with the new hip, low-priority version of state\n    unstable_scheduleCallback(() => {\n      this.setState({ asyncValue: event.target.value }, () =>\n        this.search(this.state.asyncValue)\n      );\n    });\n  };\n\n  render() {\n    const { isLoading, currentId, results, value } = this.state;\n\n    return (\n      <div className=\"search\">\n        <input className=\"input\" value={value} onChange={this.handleChange} />\n\n        {isLoading ? (\n          <Spinner size=\"large\" />\n        ) : results && results.length > 0 ? (\n          results.map(item => (\n            <ListItem\n              to={`/artist/${item.id}`}\n              onClick={currentId => this.setState({ currentId })}\n              key={item.id}\n              item={item}\n              currentId={currentId}\n            />\n          ))\n        ) : (\n          <div className=\"empty\">No Results Found. Search for artists.</div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}