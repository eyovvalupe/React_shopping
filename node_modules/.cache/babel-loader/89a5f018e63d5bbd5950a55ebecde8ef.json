{"ast":null,"code":"import _classCallCheck from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jared/workspace/github/jaredpalmer/react-suspense/src/App.js\";\nimport React, { unstable_Suspense as Suspense } from 'react';\nimport { Router } from '@reach/router';\nimport { getToken } from './api/auth';\nimport { fetchMeJSON } from './api';\nimport { codeSplitComponent } from './codeSplitComponent';\nimport Nav from './components/Nav/Nav';\nimport LoginLink from './components/Nav/LoginLink';\nimport { Spinner } from './components/Spinner';\nimport PlayerProvider from './components/PlayerProvider';\nvar SearchPage = codeSplitComponent(function () {\n  return import('./components/SearchPage').then(function (mod) {\n    return mod.default;\n  });\n});\nvar ArtistPage = codeSplitComponent(function () {\n  return import('./components/ArtistPage').then(function (mod) {\n    return mod.default;\n  });\n});\nvar AuthPage = codeSplitComponent(function () {\n  return import('./components/AuthPage').then(function (mod) {\n    return mod.default;\n  });\n});\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {};\n\n    _this.setUser = function (user) {\n      return _this.setState({\n        user: user\n      });\n    };\n\n    _this.pause = function (currentId) {\n      return function () {\n        _this.setState({\n          currentId: undefined\n        });\n      };\n    };\n\n    _this.play = function (currentId) {\n      return function () {\n        _this.setState({\n          currentId: currentId\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (getToken()) {\n        fetchMeJSON().then(function (user) {\n          return _this2.setState({\n            user: user\n          });\n        }, function (error) {\n          return console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var token = getToken();\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, !token && React.createElement(LoginLink, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }), React.createElement(Suspense, {\n        maxDuration: 1000,\n        fallback: React.createElement(Spinner, {\n          size: \"large\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(PlayerProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        default: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(SearchPage, {\n        path: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), React.createElement(AuthPage, {\n        path: \"/callback\",\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }), React.createElement(ArtistPage, {\n        path: \"/artist/:id\",\n        play: this.play,\n        pause: this.pause,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/jared/workspace/github/jaredpalmer/react-suspense/src/App.js"],"names":["React","unstable_Suspense","Suspense","Router","getToken","fetchMeJSON","codeSplitComponent","Nav","LoginLink","Spinner","PlayerProvider","SearchPage","then","mod","default","ArtistPage","AuthPage","App","state","setUser","user","setState","pause","currentId","undefined","play","error","console","log","token","Component"],"mappings":"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","sourcesContent":["import React, { unstable_Suspense as Suspense } from 'react';\nimport { Router } from '@reach/router';\nimport { getToken } from './api/auth';\nimport { fetchMeJSON } from './api';\nimport { codeSplitComponent } from './codeSplitComponent';\nimport Nav from './components/Nav/Nav';\nimport LoginLink from './components/Nav/LoginLink';\nimport { Spinner } from './components/Spinner';\nimport PlayerProvider from './components/PlayerProvider';\n\nconst SearchPage = codeSplitComponent(() =>\n  import('./components/SearchPage').then(mod => mod.default)\n);\nconst ArtistPage = codeSplitComponent(() =>\n  import('./components/ArtistPage').then(mod => mod.default)\n);\nconst AuthPage = codeSplitComponent(() =>\n  import('./components/AuthPage').then(mod => mod.default)\n);\n\nclass App extends React.Component {\n  state = {};\n  setUser = user => this.setState({ user });\n  pause = currentId => () => {\n    this.setState({ currentId: undefined });\n  };\n\n  play = currentId => () => {\n    this.setState({ currentId });\n  };\n\n  componentDidMount() {\n    if (getToken()) {\n      fetchMeJSON().then(\n        user => this.setState({ user }),\n        error => console.log(error)\n      );\n    }\n  }\n  render() {\n    const token = getToken();\n    return (\n      <div className=\"app\">\n        {!token && <LoginLink />}\n        <Suspense maxDuration={1000} fallback={<Spinner size=\"large\" />}>\n          <PlayerProvider>\n            <Router>\n              <Nav default>\n                <SearchPage path=\"/\" />\n                <AuthPage path=\"/callback\" user={this.state.user} />\n                <ArtistPage\n                  path=\"/artist/:id\"\n                  play={this.play}\n                  pause={this.pause}\n                />\n                {/* <AlbumPage path=\"/album/:id\" /> */}\n              </Nav>\n            </Router>\n          </PlayerProvider>\n        </Suspense>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}