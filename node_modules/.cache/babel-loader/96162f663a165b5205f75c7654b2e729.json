{"ast":null,"code":"import _classCallCheck from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jared/workspace/github/jaredpalmer/react-suspense/src/components/PlayerProvider.js\";\nimport React from 'react';\nexport var PlayerContext = React.createContext(null);\n\nvar PlayerProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PlayerProvider, _React$Component);\n\n  function PlayerProvider() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PlayerProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PlayerProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.pause = function (currentTrack) {\n      return function () {\n        _this.audio.pause();\n\n        _this.setState({\n          isPlaying: false\n        });\n      };\n    };\n\n    _this.play = function (currentTrack) {\n      return function () {\n        if (currentTrack !== _this.state.currentTrack) {\n          if (_this.audio) {\n            _this.audio.pause();\n          }\n\n          _this.audio = new Audio(currentTrack.preview_url);\n\n          _this.setState({\n            isLoading: true\n          });\n\n          _this.audio.onloadeddata = function () {\n            _this.setState({\n              isLoading: false,\n              currentTrack: currentTrack,\n              isPlaying: true\n            });\n\n            _this.audio.play();\n          };\n        } else {\n          _this.audio.play();\n\n          _this.setState({\n            isPlaying: true\n          });\n        }\n      };\n    };\n\n    _this.state = {\n      isLoading: true,\n      isPlaying: false,\n      play: _this.play,\n      pause: _this.pause\n    };\n    return _this;\n  }\n\n  _createClass(PlayerProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(PlayerContext.Provider, {\n        value: this.state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return PlayerProvider;\n}(React.Component);\n\nexport default PlayerProvider;","map":{"version":3,"sources":["/Users/jared/workspace/github/jaredpalmer/react-suspense/src/components/PlayerProvider.js"],"names":["React","PlayerContext","createContext","PlayerProvider","pause","currentTrack","audio","setState","isPlaying","play","state","Audio","preview_url","isLoading","onloadeddata","props","children","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,IAAMC,aAAa,GAAGD,KAAK,CAACE,aAAN,CAAoB,IAApB,CAAtB;;IAEDC,c;;;;;;;;;;;;;;;;;;UACJC,K,GAAQ,UAAAC,YAAY;AAAA,aAAI,YAAM;AAC5B,cAAKC,KAAL,CAAWF,KAAX;;AACA,cAAKG,QAAL,CAAc;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAd;AACD,OAHmB;AAAA,K;;UAKpBC,I,GAAO,UAAAJ,YAAY;AAAA,aAAI,YAAM;AAC3B,YAAIA,YAAY,KAAK,MAAKK,KAAL,CAAWL,YAAhC,EAA8C;AAC5C,cAAI,MAAKC,KAAT,EAAgB;AACd,kBAAKA,KAAL,CAAWF,KAAX;AACD;;AACD,gBAAKE,KAAL,GAAa,IAAIK,KAAJ,CAAUN,YAAY,CAACO,WAAvB,CAAb;;AACA,gBAAKL,QAAL,CAAc;AAAEM,YAAAA,SAAS,EAAE;AAAb,WAAd;;AACA,gBAAKP,KAAL,CAAWQ,YAAX,GAA0B,YAAM;AAC9B,kBAAKP,QAAL,CAAc;AAAEM,cAAAA,SAAS,EAAE,KAAb;AAAoBR,cAAAA,YAAY,EAAZA,YAApB;AAAkCG,cAAAA,SAAS,EAAE;AAA7C,aAAd;;AACA,kBAAKF,KAAL,CAAWG,IAAX;AACD,WAHD;AAID,SAVD,MAUO;AACL,gBAAKH,KAAL,CAAWG,IAAX;;AACA,gBAAKF,QAAL,CAAc;AAAEC,YAAAA,SAAS,EAAE;AAAb,WAAd;AACD;AACF,OAfkB;AAAA,K;;UAiBnBE,K,GAAQ;AACNG,MAAAA,SAAS,EAAE,IADL;AAENL,MAAAA,SAAS,EAAE,KAFL;AAGNC,MAAAA,IAAI,EAAE,MAAKA,IAHL;AAINL,MAAAA,KAAK,EAAE,MAAKA;AAJN,K;;;;;;6BAOC;AACP,aACE,oBAAC,aAAD,CAAe,QAAf;AAAwB,QAAA,KAAK,EAAE,KAAKM,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKK,KAAL,CAAWC,QADd,CADF;AAKD;;;;EApC0BhB,KAAK,CAACiB,S;;AAuCnC,eAAed,cAAf","sourcesContent":["import React from 'react';\n\nexport const PlayerContext = React.createContext(null);\n\nclass PlayerProvider extends React.Component {\n  pause = currentTrack => () => {\n    this.audio.pause();\n    this.setState({ isPlaying: false });\n  };\n\n  play = currentTrack => () => {\n    if (currentTrack !== this.state.currentTrack) {\n      if (this.audio) {\n        this.audio.pause();\n      }\n      this.audio = new Audio(currentTrack.preview_url);\n      this.setState({ isLoading: true });\n      this.audio.onloadeddata = () => {\n        this.setState({ isLoading: false, currentTrack, isPlaying: true });\n        this.audio.play();\n      };\n    } else {\n      this.audio.play();\n      this.setState({ isPlaying: true });\n    }\n  };\n\n  state = {\n    isLoading: true,\n    isPlaying: false,\n    play: this.play,\n    pause: this.pause,\n  };\n\n  render() {\n    return (\n      <PlayerContext.Provider value={this.state}>\n        {this.props.children}\n      </PlayerContext.Provider>\n    );\n  }\n}\n\nexport default PlayerProvider;\n"]},"metadata":{},"sourceType":"module"}