{"ast":null,"code":"import _classCallCheck from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jared/workspace/github/jaredpalmer/react-suspense/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jared/workspace/github/jaredpalmer/react-suspense/src/App.js\";\nimport React, { Suspense } from 'react';\nimport { Router } from '@reach/router';\nimport { getToken } from './api/auth';\nimport { fetchMeJSON } from './api';\nimport Nav from './components/Nav/Nav';\nimport LoginLink from './components/Nav/LoginLink';\nimport { Spinner } from './components/Spinner';\nimport PlayerProvider from './components/PlayerProvider';\nvar SearchPage = React.lazy(function () {\n  return import('./components/SearchPage');\n});\nvar ArtistPage = React.lazy(function () {\n  return import('./components/ArtistPage');\n});\nvar AuthPage = React.lazy(function () {\n  return import('./components/AuthPage');\n});\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {};\n\n    _this.pause = function (currentId) {\n      return function () {\n        _this.setState({\n          currentId: undefined\n        });\n      };\n    };\n\n    _this.play = function (currentId) {\n      return function () {\n        _this.setState({\n          currentId: currentId\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (getToken()) {\n        fetchMeJSON().then(function (user) {\n          return _this2.setState({\n            user: user\n          });\n        }, function (error) {\n          return console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var token = getToken();\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, !token && React.createElement(LoginLink, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }), React.createElement(Suspense, {\n        maxDuration: 1000,\n        fallback: React.createElement(Spinner, {\n          size: \"large\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(PlayerProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        default: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(SearchPage, {\n        path: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/jared/workspace/github/jaredpalmer/react-suspense/src/App.js"],"names":["React","Suspense","Router","getToken","fetchMeJSON","Nav","LoginLink","Spinner","PlayerProvider","SearchPage","lazy","ArtistPage","AuthPage","App","state","pause","currentId","setState","undefined","play","then","user","error","console","log","token","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,SAASC,WAAT,QAA4B,OAA5B;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AAEA,IAAMC,UAAU,GAAGT,KAAK,CAACU,IAAN,CAAW;AAAA,SAAM,OAAO,yBAAP,CAAN;AAAA,CAAX,CAAnB;AACA,IAAMC,UAAU,GAAGX,KAAK,CAACU,IAAN,CAAW;AAAA,SAAM,OAAO,yBAAP,CAAN;AAAA,CAAX,CAAnB;AACA,IAAME,QAAQ,GAAGZ,KAAK,CAACU,IAAN,CAAW;AAAA,SAAM,OAAO,uBAAP,CAAN;AAAA,CAAX,CAAjB;;IAEMG,G;;;;;;;;;;;;;;;;;UACJC,K,GAAQ,E;;UACRC,K,GAAQ,UAAAC,SAAS;AAAA,aAAI,YAAM;AACzB,cAAKC,QAAL,CAAc;AAAED,UAAAA,SAAS,EAAEE;AAAb,SAAd;AACD,OAFgB;AAAA,K;;UAIjBC,I,GAAO,UAAAH,SAAS;AAAA,aAAI,YAAM;AACxB,cAAKC,QAAL,CAAc;AAAED,UAAAA,SAAS,EAATA;AAAF,SAAd;AACD,OAFe;AAAA,K;;;;;;;wCAII;AAAA;;AAClB,UAAIb,QAAQ,EAAZ,EAAgB;AACdC,QAAAA,WAAW,GAAGgB,IAAd,CACE,UAAAC,IAAI;AAAA,iBAAI,MAAI,CAACJ,QAAL,CAAc;AAAEI,YAAAA,IAAI,EAAJA;AAAF,WAAd,CAAJ;AAAA,SADN,EAEE,UAAAC,KAAK;AAAA,iBAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ;AAAA,SAFP;AAID;AACF;;;6BACQ;AACP,UAAMG,KAAK,GAAGtB,QAAQ,EAAtB;AACA,aACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAACsB,KAAD,IAAU,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADb,EAEE,oBAAC,QAAD;AAAU,QAAA,WAAW,EAAE,IAAvB;AAA6B,QAAA,QAAQ,EAAE,oBAAC,OAAD;AAAS,UAAA,IAAI,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,OAAO,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,IAAI,EAAC,GAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADF,CADF,CAFF,CADF;AAgBD;;;;EApCezB,KAAK,CAAC0B,S;;AAuCxB,eAAeb,GAAf","sourcesContent":["import React, { Suspense } from 'react';\nimport { Router } from '@reach/router';\nimport { getToken } from './api/auth';\nimport { fetchMeJSON } from './api';\nimport Nav from './components/Nav/Nav';\nimport LoginLink from './components/Nav/LoginLink';\nimport { Spinner } from './components/Spinner';\nimport PlayerProvider from './components/PlayerProvider';\n\nconst SearchPage = React.lazy(() => import('./components/SearchPage'));\nconst ArtistPage = React.lazy(() => import('./components/ArtistPage'));\nconst AuthPage = React.lazy(() => import('./components/AuthPage'));\n\nclass App extends React.Component {\n  state = {};\n  pause = currentId => () => {\n    this.setState({ currentId: undefined });\n  };\n\n  play = currentId => () => {\n    this.setState({ currentId });\n  };\n\n  componentDidMount() {\n    if (getToken()) {\n      fetchMeJSON().then(\n        user => this.setState({ user }),\n        error => console.log(error)\n      );\n    }\n  }\n  render() {\n    const token = getToken();\n    return (\n      <div className=\"app\">\n        {!token && <LoginLink />}\n        <Suspense maxDuration={1000} fallback={<Spinner size=\"large\" />}>\n          <PlayerProvider>\n            <Router>\n              <Nav default>\n                <SearchPage path=\"/\" />\n\n                {/* <AlbumPage path=\"/album/:id\" /> */}\n              </Nav>\n            </Router>\n          </PlayerProvider>\n        </Suspense>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}