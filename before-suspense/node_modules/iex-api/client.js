"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * This class handles communication with the IEX API in a type-safe and flexible
 * way. It is usable in Browser, React Native, and NodeJS contexts.
 */
class IEXClient {
    /**
     * @param fetchFunction A function that is API compatible with the browser
     *  fetch function. In browsers and React Native contexts, the global fetch
     *  object can be passed in. In NodeJS, a library like fetch-ponyfill can be
     *  used to provide such a function.
     * @param httpsEndpoint An optional argument to override the IEX API endpoint.
     *  Unless you have a specific mock endpoint or the like in mind, it is
     *  recommended to omit this argument.
     */
    constructor(fetchFunction, httpsEndpoint = 'https://api.iextrading.com/1.0') {
        this.fetchFunction = fetchFunction;
        this.httpsEndpoint = httpsEndpoint;
        this.request = this.request.bind(this); // tslint:disable-line:no-unsafe-any
    }
    /**
     * This function does a straight pass-through request to the IEX api using the
     * path provided. It can be used to do any call to the service, including ones
     * that respond with content-type text/csv or application/json.
     *
     * @example
     *   request('/stock/aapl/price')
     *   request('/stock/aapl/quote?displayPercent=true')
     *
     * @see https://iextrading.com/developer/docs/#getting-started
     *
     * @param path The path to hit the IEX API endpoint at.
     */
    request(path) {
        return this.fetchFunction(`${this.httpsEndpoint}/${path}`)
            .then(res => {
            const contentType = res.headers.get('content-type');
            if (contentType === null) {
                return null;
            }
            else if (contentType.includes('application/json')) {
                return res.json();
            }
            else {
                return res.text();
            }
        });
    }
    /**
     * Gets the full list of stock symbols supported by IEX.
     *
     * @see https://iextrading.com/developer/docs/#symbols
     */
    symbols() {
        return this.request('/ref-data/symbols');
    }
    /**
     * Gets the quote information of a given stock.
     *
     * @see https://iextrading.com/developer/docs/#quote
     * @param stockSymbol The symbol of the stock to fetch data for.
     * @param [displayPercent=false] If set to true, all percentage values will be multiplied by a factor of 100.
     */
    stockQuote(stockSymbol, displayPercent) {
        const queryString = displayPercent ? '?displayPercent=true' : '';
        return this.request(`/stock/${stockSymbol}/quote${queryString}`);
    }
    /**
     * Gets charting data for a stock in a given range.
     *
     * @see https://iextrading.com/developer/docs/#chart
     * @param stockSymbol The symbol of the stock to fetch data for.
     * @param range The time range to load chart data for.
     */
    stockChart(stockSymbol, range) {
        return this.request(`/stock/${stockSymbol}/chart/${range}`);
    }
    /**
     * Gets the price and time for the open and close of a stock.
     *
     * @see https://iextrading.com/developer/docs/#open-close
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockOpenClose(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/open-close`);
    }
    /**
     * Gets previous day adjusted price data for a single stock, or an object
     * keyed by symbol of price data for the whole market.
     *
     * @see https://iextrading.com/developer/docs/#previous
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockPrevious(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/previous`);
    }
    /**
     * Gets information about the company associated with the stock symbol.
     *
     * @see https://iextrading.com/developer/docs/#company
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockCompany(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/company`);
    }
    /**
     * Gets key stats for the given stock symbol.
     *
     * @see https://iextrading.com/developer/docs/#key-stats
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockKeyStats(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/stats`);
    }
    /**
     * Gets a list of peer tickerss for the given symbols.
     *
     * @see https://iextrading.com/developer/docs/#peers
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockPeers(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/peers`);
    }
    /**
     * Similar to the peers endpoint, except this will return most active market
     * symbols when peers are not available. If the symbols returned are not
     * peers, the peers key will be false. This is not intended to represent a
     * definitive or accurate list of peers, and is subject to change at any time.
     *
     * @see https://iextrading.com/developer/docs/#relevant
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockRelevant(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/relevant`);
    }
    /**
     * Gets a list of news articles related to the given stock.
     *
     * @see https://iextrading.com/developer/docs/#news
     *
     * @param stockSymbol The symbol of the stock to fetch news for.
     * @param [range=10] The number of news articles to pull. Defaults to 10 if omitted.
     */
    stockNews(stockSymbol, range) {
        if (range) {
            return this.request(`/stock/${stockSymbol}/news/last/${range}`);
        }
        else {
            return this.request(`/stock/${stockSymbol}/news`);
        }
    }
    /**
     * Gets income statement, balance sheet, and cash flow data from the four most recent reported quarters.
     *
     * @see https://iextrading.com/developer/docs/#financials
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockFinancials(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/financials`);
    }
    /**
     * Gets earnings data from the four most recent reported quarters.
     *
     * @see https://iextrading.com/developer/docs/#earnings
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockEarnings(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/earnings`);
    }
    /**
     * Gets divdends paid by the company over the given range.
     *
     * @see https://iextrading.com/developer/docs/#dividends
     * @param stockSymbol The symbol of the stock to fetch data for.
     * @param range The date range to get dividends from.
     */
    stockDividends(stockSymbol, range) {
        return this.request(`/stock/${stockSymbol}/dividends/${range}`);
    }
    /**
     * Gets stock splits of the company over the given range.
     *
     * @see https://iextrading.com/developer/docs/#splits
     * @param stockSymbol The symbol of the stock to fetch data for.
     * @param range The date range to get splits from.
     */
    stockSplits(stockSymbol, range) {
        return this.request(`/stock/${stockSymbol}/splits/${range}`);
    }
    /**
     * Gets an object containing a URL to the company's logo.
     *
     * @see https://iextrading.com/developer/docs/#logo
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockLogo(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/logo`);
    }
    /**
     * Fetches the price of a given stock.
     *
     * @see https://iextrading.com/developer/docs/#price
     * @param stockSymbol The symbol of the stock to fetch prices for.
     * @return A single number, being the IEX real time price, the 15 minute
     *  delayed market price, or the previous close price, is returned.
     */
    stockPrice(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/price`);
    }
    /**
     * Gets the 15 minute delayed market quote.
     *
     * @see https://iextrading.com/developer/docs/#delayed-quote
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockDelayedQuote(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/price`);
    }
    /**
     * Get a list of quotes for the top 10 symbols in a specified list.
     *
     * @see https://iextrading.com/developer/docs/#list
     * @param list The market list to fetch quotes from.
     * @param [displayPercent=false] If set to true, all percentage values will be multiplied by a factor of 100.
     */
    stockMarketListTopTen(list, displayPercent) {
        const queryString = displayPercent ? '?displayPercent=true' : '';
        return this.request(`/stock/market/list/${list}${queryString}`);
    }
    /**
     * Gets an array of effective spread, eligible volume, and price improvement
     * of a stock, by market. Unlike volume-by-venue, this will only return a
     * venue if effective spread is not ‘N/A’. Values are sorted in descending
     * order by effectiveSpread. Lower effectiveSpread and higher priceImprovement
     * values are generally considered optimal.
     *
     * @see https://iextrading.com/developer/docs/#effective-spread
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockEffectiveSpread(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/effective-spread`);
    }
    /**
     * Gets 15 minute delayed and 30 day average consolidated volume percentage of
     * a stock, by market. This call will always return 13 values, and will be
     * sorted in ascending order by current day trading volume percentage.
     *
     * @see https://iextrading.com/developer/docs/#volume-by-venue
     * @param stockSymbol The symbol of the stock to fetch data for.
     */
    stockVolumeByVenue(stockSymbol) {
        return this.request(`/stock/${stockSymbol}/volume-by-venue`);
    }
}
exports.default = IEXClient;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NsaWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUdBOzs7R0FHRztBQUNIO0lBSUU7Ozs7Ozs7O09BUUc7SUFDSCxZQUFtQixhQUEyQixFQUFFLGFBQWEsR0FBRyxnQ0FBZ0M7UUFDOUYsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFDbEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQSxDQUFDLG9DQUFvQztJQUM3RSxDQUFDO0lBRUQ7Ozs7Ozs7Ozs7OztPQVlHO0lBQ0ksT0FBTyxDQUFDLElBQVk7UUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksRUFBRSxDQUFDO2FBQ3pELElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNWLE1BQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFBO1lBQ25ELEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN6QixNQUFNLENBQUMsSUFBSSxDQUFBO1lBQ2IsQ0FBQztZQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNwRCxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFBO1lBQ25CLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDTixNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFBO1lBQ25CLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksT0FBTztR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LFNBQVMsQ0FBQyxXQUFtQjtRQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLFdBQVcsT0FBTyxDQUFDLENBQUE7SUFDbkQsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSSxVQUFVLENBQUMsV0FBbUI7UUFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxXQUFXLFFBQVEsQ0FBQyxDQUFBO0lBQ3BELENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLGlCQUFpQixDQUFDLFdBQW1CO1FBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsV0FBVyxRQUFRLENBQUMsQ0FBQTtJQUNwRCxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0kscUJBQXFCLENBQUMsSUFBMEIsRUFBRSxjQUF3QjtRQUMvRSxNQUFNLFdBQVcsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7UUFDaEUsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsc0JBQXNCLElBQUksR0FBRyxXQUFXLEVBQUUsQ0FBQyxDQUFBO0lBQ2pFLENBQUM7SUFFRDs7Ozs7Ozs7O09BU0c7SUFDSSxvQkFBb0IsQ0FBQyxXQUFtQjtRQUM3QyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLFdBQVcsbUJBQW1CLENBQUMsQ0FBQTtJQUMvRCxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNJLGtCQUFrQixDQUFDLFdBQW1CO1FBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsV0FBVyxrQkFBa0IsQ0FBQyxDQUFBO0lBQzlELENBQUM7Q0FDRjtBQTdRRCw0QkE2UUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWZlcmVuY2VEYXRhQVBJIGZyb20gJy4vYXBpcy9yZWZlcmVuY2VEYXRhJ1xuaW1wb3J0ICogYXMgU3RvY2tzQVBJIGZyb20gJy4vYXBpcy9zdG9ja3MnXG5cbi8qKlxuICogVGhpcyBjbGFzcyBoYW5kbGVzIGNvbW11bmljYXRpb24gd2l0aCB0aGUgSUVYIEFQSSBpbiBhIHR5cGUtc2FmZSBhbmQgZmxleGlibGVcbiAqIHdheS4gSXQgaXMgdXNhYmxlIGluIEJyb3dzZXIsIFJlYWN0IE5hdGl2ZSwgYW5kIE5vZGVKUyBjb250ZXh0cy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSUVYQ2xpZW50IHtcbiAgcHJpdmF0ZSBmZXRjaEZ1bmN0aW9uOiB0eXBlb2YgZmV0Y2hcbiAgcHJpdmF0ZSBodHRwc0VuZHBvaW50OiBzdHJpbmdcblxuICAvKipcbiAgICogQHBhcmFtIGZldGNoRnVuY3Rpb24gQSBmdW5jdGlvbiB0aGF0IGlzIEFQSSBjb21wYXRpYmxlIHdpdGggdGhlIGJyb3dzZXJcbiAgICogIGZldGNoIGZ1bmN0aW9uLiBJbiBicm93c2VycyBhbmQgUmVhY3QgTmF0aXZlIGNvbnRleHRzLCB0aGUgZ2xvYmFsIGZldGNoXG4gICAqICBvYmplY3QgY2FuIGJlIHBhc3NlZCBpbi4gSW4gTm9kZUpTLCBhIGxpYnJhcnkgbGlrZSBmZXRjaC1wb255ZmlsbCBjYW4gYmVcbiAgICogIHVzZWQgdG8gcHJvdmlkZSBzdWNoIGEgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSBodHRwc0VuZHBvaW50IEFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIG92ZXJyaWRlIHRoZSBJRVggQVBJIGVuZHBvaW50LlxuICAgKiAgVW5sZXNzIHlvdSBoYXZlIGEgc3BlY2lmaWMgbW9jayBlbmRwb2ludCBvciB0aGUgbGlrZSBpbiBtaW5kLCBpdCBpc1xuICAgKiAgcmVjb21tZW5kZWQgdG8gb21pdCB0aGlzIGFyZ3VtZW50LlxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKGZldGNoRnVuY3Rpb246IHR5cGVvZiBmZXRjaCwgaHR0cHNFbmRwb2ludCA9ICdodHRwczovL2FwaS5pZXh0cmFkaW5nLmNvbS8xLjAnKSB7XG4gICAgdGhpcy5mZXRjaEZ1bmN0aW9uID0gZmV0Y2hGdW5jdGlvblxuICAgIHRoaXMuaHR0cHNFbmRwb2ludCA9IGh0dHBzRW5kcG9pbnRcbiAgICB0aGlzLnJlcXVlc3QgPSB0aGlzLnJlcXVlc3QuYmluZCh0aGlzKSAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLXVuc2FmZS1hbnlcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGRvZXMgYSBzdHJhaWdodCBwYXNzLXRocm91Z2ggcmVxdWVzdCB0byB0aGUgSUVYIGFwaSB1c2luZyB0aGVcbiAgICogcGF0aCBwcm92aWRlZC4gSXQgY2FuIGJlIHVzZWQgdG8gZG8gYW55IGNhbGwgdG8gdGhlIHNlcnZpY2UsIGluY2x1ZGluZyBvbmVzXG4gICAqIHRoYXQgcmVzcG9uZCB3aXRoIGNvbnRlbnQtdHlwZSB0ZXh0L2NzdiBvciBhcHBsaWNhdGlvbi9qc29uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIHJlcXVlc3QoJy9zdG9jay9hYXBsL3ByaWNlJylcbiAgICogICByZXF1ZXN0KCcvc3RvY2svYWFwbC9xdW90ZT9kaXNwbGF5UGVyY2VudD10cnVlJylcbiAgICpcbiAgICogQHNlZSBodHRwczovL2lleHRyYWRpbmcuY29tL2RldmVsb3Blci9kb2NzLyNnZXR0aW5nLXN0YXJ0ZWRcbiAgICpcbiAgICogQHBhcmFtIHBhdGggVGhlIHBhdGggdG8gaGl0IHRoZSBJRVggQVBJIGVuZHBvaW50IGF0LlxuICAgKi9cbiAgcHVibGljIHJlcXVlc3QocGF0aDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaEZ1bmN0aW9uKGAke3RoaXMuaHR0cHNFbmRwb2ludH0vJHtwYXRofWApXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKVxuICAgICAgaWYgKGNvbnRlbnRUeXBlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9IGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXMudGV4dCgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBmdWxsIGxpc3Qgb2Ygc3RvY2sgc3ltYm9scyBzdXBwb3J0ZWQgYnkgSUVYLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI3N5bWJvbHNcbiAgICovXG4gIHB1YmxpYyBzeW1ib2xzKCk6IFByb21pc2U8UmVmZXJlbmNlRGF0YUFQSS5TdG9ja1N5bWJvbFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnL3JlZi1kYXRhL3N5bWJvbHMnKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHF1b3RlIGluZm9ybWF0aW9uIG9mIGEgZ2l2ZW4gc3RvY2suXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9pZXh0cmFkaW5nLmNvbS9kZXZlbG9wZXIvZG9jcy8jcXVvdGVcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIGRhdGEgZm9yLlxuICAgKiBAcGFyYW0gW2Rpc3BsYXlQZXJjZW50PWZhbHNlXSBJZiBzZXQgdG8gdHJ1ZSwgYWxsIHBlcmNlbnRhZ2UgdmFsdWVzIHdpbGwgYmUgbXVsdGlwbGllZCBieSBhIGZhY3RvciBvZiAxMDAuXG4gICAqL1xuICBwdWJsaWMgc3RvY2tRdW90ZShzdG9ja1N5bWJvbDogc3RyaW5nLCBkaXNwbGF5UGVyY2VudD86IGJvb2xlYW4pOiBQcm9taXNlPFN0b2Nrc0FQSS5RdW90ZVJlc3BvbnNlPiB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBkaXNwbGF5UGVyY2VudCA/ICc/ZGlzcGxheVBlcmNlbnQ9dHJ1ZScgOiAnJ1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdG9jay8ke3N0b2NrU3ltYm9sfS9xdW90ZSR7cXVlcnlTdHJpbmd9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNoYXJ0aW5nIGRhdGEgZm9yIGEgc3RvY2sgaW4gYSBnaXZlbiByYW5nZS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2lleHRyYWRpbmcuY29tL2RldmVsb3Blci9kb2NzLyNjaGFydFxuICAgKiBAcGFyYW0gc3RvY2tTeW1ib2wgVGhlIHN5bWJvbCBvZiB0aGUgc3RvY2sgdG8gZmV0Y2ggZGF0YSBmb3IuXG4gICAqIEBwYXJhbSByYW5nZSBUaGUgdGltZSByYW5nZSB0byBsb2FkIGNoYXJ0IGRhdGEgZm9yLlxuICAgKi9cbiAgcHVibGljIHN0b2NrQ2hhcnQoc3RvY2tTeW1ib2w6IHN0cmluZywgcmFuZ2U6IFN0b2Nrc0FQSS5DaGFydFJhbmdlT3B0aW9uKTogUHJvbWlzZTxTdG9ja3NBUEkuQ2hhcnRSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdG9jay8ke3N0b2NrU3ltYm9sfS9jaGFydC8ke3JhbmdlfWApXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcHJpY2UgYW5kIHRpbWUgZm9yIHRoZSBvcGVuIGFuZCBjbG9zZSBvZiBhIHN0b2NrLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI29wZW4tY2xvc2VcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIGRhdGEgZm9yLlxuICAgKi9cbiAgcHVibGljIHN0b2NrT3BlbkNsb3NlKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPFN0b2Nrc0FQSS5PcGVuQ2xvc2VSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdG9jay8ke3N0b2NrU3ltYm9sfS9vcGVuLWNsb3NlYClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHByZXZpb3VzIGRheSBhZGp1c3RlZCBwcmljZSBkYXRhIGZvciBhIHNpbmdsZSBzdG9jaywgb3IgYW4gb2JqZWN0XG4gICAqIGtleWVkIGJ5IHN5bWJvbCBvZiBwcmljZSBkYXRhIGZvciB0aGUgd2hvbGUgbWFya2V0LlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI3ByZXZpb3VzXG4gICAqIEBwYXJhbSBzdG9ja1N5bWJvbCBUaGUgc3ltYm9sIG9mIHRoZSBzdG9jayB0byBmZXRjaCBkYXRhIGZvci5cbiAgICovXG4gIHB1YmxpYyBzdG9ja1ByZXZpb3VzKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPFN0b2Nrc0FQSS5QcmV2aW91c1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L3ByZXZpb3VzYClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb21wYW55IGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RvY2sgc3ltYm9sLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI2NvbXBhbnlcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIGRhdGEgZm9yLlxuICAgKi9cbiAgcHVibGljIHN0b2NrQ29tcGFueShzdG9ja1N5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxTdG9ja3NBUEkuQ29tcGFueVJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L2NvbXBhbnlgKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMga2V5IHN0YXRzIGZvciB0aGUgZ2l2ZW4gc3RvY2sgc3ltYm9sLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI2tleS1zdGF0c1xuICAgKiBAcGFyYW0gc3RvY2tTeW1ib2wgVGhlIHN5bWJvbCBvZiB0aGUgc3RvY2sgdG8gZmV0Y2ggZGF0YSBmb3IuXG4gICAqL1xuICBwdWJsaWMgc3RvY2tLZXlTdGF0cyhzdG9ja1N5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxTdG9ja3NBUEkuS2V5U3RhdHNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdG9jay8ke3N0b2NrU3ltYm9sfS9zdGF0c2ApXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIGxpc3Qgb2YgcGVlciB0aWNrZXJzcyBmb3IgdGhlIGdpdmVuIHN5bWJvbHMuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9pZXh0cmFkaW5nLmNvbS9kZXZlbG9wZXIvZG9jcy8jcGVlcnNcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIGRhdGEgZm9yLlxuICAgKi9cbiAgcHVibGljIHN0b2NrUGVlcnMoc3RvY2tTeW1ib2w6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAvc3RvY2svJHtzdG9ja1N5bWJvbH0vcGVlcnNgKVxuICB9XG5cbiAgLyoqXG4gICAqIFNpbWlsYXIgdG8gdGhlIHBlZXJzIGVuZHBvaW50LCBleGNlcHQgdGhpcyB3aWxsIHJldHVybiBtb3N0IGFjdGl2ZSBtYXJrZXRcbiAgICogc3ltYm9scyB3aGVuIHBlZXJzIGFyZSBub3QgYXZhaWxhYmxlLiBJZiB0aGUgc3ltYm9scyByZXR1cm5lZCBhcmUgbm90XG4gICAqIHBlZXJzLCB0aGUgcGVlcnMga2V5IHdpbGwgYmUgZmFsc2UuIFRoaXMgaXMgbm90IGludGVuZGVkIHRvIHJlcHJlc2VudCBhXG4gICAqIGRlZmluaXRpdmUgb3IgYWNjdXJhdGUgbGlzdCBvZiBwZWVycywgYW5kIGlzIHN1YmplY3QgdG8gY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI3JlbGV2YW50XG4gICAqIEBwYXJhbSBzdG9ja1N5bWJvbCBUaGUgc3ltYm9sIG9mIHRoZSBzdG9jayB0byBmZXRjaCBkYXRhIGZvci5cbiAgICovXG4gIHB1YmxpYyBzdG9ja1JlbGV2YW50KHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPFN0b2Nrc0FQSS5SZWxldmFudFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L3JlbGV2YW50YClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgbGlzdCBvZiBuZXdzIGFydGljbGVzIHJlbGF0ZWQgdG8gdGhlIGdpdmVuIHN0b2NrLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI25ld3NcbiAgICpcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIG5ld3MgZm9yLlxuICAgKiBAcGFyYW0gW3JhbmdlPTEwXSBUaGUgbnVtYmVyIG9mIG5ld3MgYXJ0aWNsZXMgdG8gcHVsbC4gRGVmYXVsdHMgdG8gMTAgaWYgb21pdHRlZC5cbiAgICovXG4gIHB1YmxpYyBzdG9ja05ld3Moc3RvY2tTeW1ib2w6IHN0cmluZywgcmFuZ2U/OiBTdG9ja3NBUEkuTmV3c1JhbmdlKTogUHJvbWlzZTxTdG9ja3NBUEkuTmV3c1tdPiB7XG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAvc3RvY2svJHtzdG9ja1N5bWJvbH0vbmV3cy9sYXN0LyR7cmFuZ2V9YClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L25ld3NgKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGluY29tZSBzdGF0ZW1lbnQsIGJhbGFuY2Ugc2hlZXQsIGFuZCBjYXNoIGZsb3cgZGF0YSBmcm9tIHRoZSBmb3VyIG1vc3QgcmVjZW50IHJlcG9ydGVkIHF1YXJ0ZXJzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI2ZpbmFuY2lhbHNcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIGRhdGEgZm9yLlxuICAgKi9cbiAgcHVibGljIHN0b2NrRmluYW5jaWFscyhzdG9ja1N5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxTdG9ja3NBUEkuRmluYW5jaWFsc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L2ZpbmFuY2lhbHNgKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgZWFybmluZ3MgZGF0YSBmcm9tIHRoZSBmb3VyIG1vc3QgcmVjZW50IHJlcG9ydGVkIHF1YXJ0ZXJzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI2Vhcm5pbmdzXG4gICAqIEBwYXJhbSBzdG9ja1N5bWJvbCBUaGUgc3ltYm9sIG9mIHRoZSBzdG9jayB0byBmZXRjaCBkYXRhIGZvci5cbiAgICovXG4gIHB1YmxpYyBzdG9ja0Vhcm5pbmdzKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPFN0b2Nrc0FQSS5FYXJuaW5nc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L2Vhcm5pbmdzYClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGRpdmRlbmRzIHBhaWQgYnkgdGhlIGNvbXBhbnkgb3ZlciB0aGUgZ2l2ZW4gcmFuZ2UuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9pZXh0cmFkaW5nLmNvbS9kZXZlbG9wZXIvZG9jcy8jZGl2aWRlbmRzXG4gICAqIEBwYXJhbSBzdG9ja1N5bWJvbCBUaGUgc3ltYm9sIG9mIHRoZSBzdG9jayB0byBmZXRjaCBkYXRhIGZvci5cbiAgICogQHBhcmFtIHJhbmdlIFRoZSBkYXRlIHJhbmdlIHRvIGdldCBkaXZpZGVuZHMgZnJvbS5cbiAgICovXG4gIHB1YmxpYyBzdG9ja0RpdmlkZW5kcyhzdG9ja1N5bWJvbDogc3RyaW5nLCByYW5nZTogU3RvY2tzQVBJLkRpdmlkZW5kUmFuZ2UpOiBQcm9taXNlPFN0b2Nrc0FQSS5EaXZpZGVuZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L2RpdmlkZW5kcy8ke3JhbmdlfWApXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBzdG9jayBzcGxpdHMgb2YgdGhlIGNvbXBhbnkgb3ZlciB0aGUgZ2l2ZW4gcmFuZ2UuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9pZXh0cmFkaW5nLmNvbS9kZXZlbG9wZXIvZG9jcy8jc3BsaXRzXG4gICAqIEBwYXJhbSBzdG9ja1N5bWJvbCBUaGUgc3ltYm9sIG9mIHRoZSBzdG9jayB0byBmZXRjaCBkYXRhIGZvci5cbiAgICogQHBhcmFtIHJhbmdlIFRoZSBkYXRlIHJhbmdlIHRvIGdldCBzcGxpdHMgZnJvbS5cbiAgICovXG4gIHB1YmxpYyBzdG9ja1NwbGl0cyhzdG9ja1N5bWJvbDogc3RyaW5nLCByYW5nZTogU3RvY2tzQVBJLlNwbGl0UmFuZ2UpOiBQcm9taXNlPFN0b2Nrc0FQSS5TcGxpdFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrLyR7c3RvY2tTeW1ib2x9L3NwbGl0cy8ke3JhbmdlfWApXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBvYmplY3QgY29udGFpbmluZyBhIFVSTCB0byB0aGUgY29tcGFueSdzIGxvZ28uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9pZXh0cmFkaW5nLmNvbS9kZXZlbG9wZXIvZG9jcy8jbG9nb1xuICAgKiBAcGFyYW0gc3RvY2tTeW1ib2wgVGhlIHN5bWJvbCBvZiB0aGUgc3RvY2sgdG8gZmV0Y2ggZGF0YSBmb3IuXG4gICAqL1xuICBwdWJsaWMgc3RvY2tMb2dvKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPFN0b2Nrc0FQSS5Mb2dvUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAvc3RvY2svJHtzdG9ja1N5bWJvbH0vbG9nb2ApXG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyB0aGUgcHJpY2Ugb2YgYSBnaXZlbiBzdG9jay5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2lleHRyYWRpbmcuY29tL2RldmVsb3Blci9kb2NzLyNwcmljZVxuICAgKiBAcGFyYW0gc3RvY2tTeW1ib2wgVGhlIHN5bWJvbCBvZiB0aGUgc3RvY2sgdG8gZmV0Y2ggcHJpY2VzIGZvci5cbiAgICogQHJldHVybiBBIHNpbmdsZSBudW1iZXIsIGJlaW5nIHRoZSBJRVggcmVhbCB0aW1lIHByaWNlLCB0aGUgMTUgbWludXRlXG4gICAqICBkZWxheWVkIG1hcmtldCBwcmljZSwgb3IgdGhlIHByZXZpb3VzIGNsb3NlIHByaWNlLCBpcyByZXR1cm5lZC5cbiAgICovXG4gIHB1YmxpYyBzdG9ja1ByaWNlKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdG9jay8ke3N0b2NrU3ltYm9sfS9wcmljZWApXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgMTUgbWludXRlIGRlbGF5ZWQgbWFya2V0IHF1b3RlLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI2RlbGF5ZWQtcXVvdGVcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIGRhdGEgZm9yLlxuICAgKi9cbiAgcHVibGljIHN0b2NrRGVsYXllZFF1b3RlKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdG9jay8ke3N0b2NrU3ltYm9sfS9wcmljZWApXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBxdW90ZXMgZm9yIHRoZSB0b3AgMTAgc3ltYm9scyBpbiBhIHNwZWNpZmllZCBsaXN0LlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI2xpc3RcbiAgICogQHBhcmFtIGxpc3QgVGhlIG1hcmtldCBsaXN0IHRvIGZldGNoIHF1b3RlcyBmcm9tLlxuICAgKiBAcGFyYW0gW2Rpc3BsYXlQZXJjZW50PWZhbHNlXSBJZiBzZXQgdG8gdHJ1ZSwgYWxsIHBlcmNlbnRhZ2UgdmFsdWVzIHdpbGwgYmUgbXVsdGlwbGllZCBieSBhIGZhY3RvciBvZiAxMDAuXG4gICAqL1xuICBwdWJsaWMgc3RvY2tNYXJrZXRMaXN0VG9wVGVuKGxpc3Q6IFN0b2Nrc0FQSS5NYXJrZXRMaXN0LCBkaXNwbGF5UGVyY2VudD86IGJvb2xlYW4pOiBQcm9taXNlPFN0b2Nrc0FQSS5RdW90ZVJlc3BvbnNlW10+IHtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGRpc3BsYXlQZXJjZW50ID8gJz9kaXNwbGF5UGVyY2VudD10cnVlJyA6ICcnXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N0b2NrL21hcmtldC9saXN0LyR7bGlzdH0ke3F1ZXJ5U3RyaW5nfWApXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBhcnJheSBvZiBlZmZlY3RpdmUgc3ByZWFkLCBlbGlnaWJsZSB2b2x1bWUsIGFuZCBwcmljZSBpbXByb3ZlbWVudFxuICAgKiBvZiBhIHN0b2NrLCBieSBtYXJrZXQuIFVubGlrZSB2b2x1bWUtYnktdmVudWUsIHRoaXMgd2lsbCBvbmx5IHJldHVybiBhXG4gICAqIHZlbnVlIGlmIGVmZmVjdGl2ZSBzcHJlYWQgaXMgbm90IOKAmE4vQeKAmS4gVmFsdWVzIGFyZSBzb3J0ZWQgaW4gZGVzY2VuZGluZ1xuICAgKiBvcmRlciBieSBlZmZlY3RpdmVTcHJlYWQuIExvd2VyIGVmZmVjdGl2ZVNwcmVhZCBhbmQgaGlnaGVyIHByaWNlSW1wcm92ZW1lbnRcbiAgICogdmFsdWVzIGFyZSBnZW5lcmFsbHkgY29uc2lkZXJlZCBvcHRpbWFsLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI2VmZmVjdGl2ZS1zcHJlYWRcbiAgICogQHBhcmFtIHN0b2NrU3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIHN0b2NrIHRvIGZldGNoIGRhdGEgZm9yLlxuICAgKi9cbiAgcHVibGljIHN0b2NrRWZmZWN0aXZlU3ByZWFkKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPFN0b2Nrc0FQSS5FZmZlY3RpdmVTcHJlYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdG9jay8ke3N0b2NrU3ltYm9sfS9lZmZlY3RpdmUtc3ByZWFkYClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIDE1IG1pbnV0ZSBkZWxheWVkIGFuZCAzMCBkYXkgYXZlcmFnZSBjb25zb2xpZGF0ZWQgdm9sdW1lIHBlcmNlbnRhZ2Ugb2ZcbiAgICogYSBzdG9jaywgYnkgbWFya2V0LiBUaGlzIGNhbGwgd2lsbCBhbHdheXMgcmV0dXJuIDEzIHZhbHVlcywgYW5kIHdpbGwgYmVcbiAgICogc29ydGVkIGluIGFzY2VuZGluZyBvcmRlciBieSBjdXJyZW50IGRheSB0cmFkaW5nIHZvbHVtZSBwZXJjZW50YWdlLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaWV4dHJhZGluZy5jb20vZGV2ZWxvcGVyL2RvY3MvI3ZvbHVtZS1ieS12ZW51ZVxuICAgKiBAcGFyYW0gc3RvY2tTeW1ib2wgVGhlIHN5bWJvbCBvZiB0aGUgc3RvY2sgdG8gZmV0Y2ggZGF0YSBmb3IuXG4gICAqL1xuICBwdWJsaWMgc3RvY2tWb2x1bWVCeVZlbnVlKHN0b2NrU3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPFN0b2Nrc0FQSS5Wb2x1bWVCeVZlbnVlW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAvc3RvY2svJHtzdG9ja1N5bWJvbH0vdm9sdW1lLWJ5LXZlbnVlYClcbiAgfVxufVxuIl19